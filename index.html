<!DOCTYPE html>
<head>
	<title>Mortgage Payoff Calculator</title>
	<link rel="stylesheet" href="styles.css" type="text/css">
</head>

<body>

	<h1>Mortgage Payoff Calculator</h1>
	Loan Amount: $<input type='text' name='loan'><br><br>
	Interest Rate: <input type='text' name='interest'>%<br><br>
	Loan Term (Years): <input type='text' name='term'><br><br>
	Start Date: <input type='text' name='date'> mm-dd-yyyy<br><br>
	Actual Monthly Payment: $<input type='text' name='actual'><br><br>
  
<!--  <h1>Feedback</h1>
	Loan Amount: $<span id='loan'>0.00</span> <br><br>
	Interest Rate: <span id='interest'>0.00</span>% <br><br>
	Loan Term (Years): $<span id='term'>0.00</span> <br><br>
	Start Date: $<span id='date'>0.00</span> <br><br>
	Actual Monthly Payment: $<span id='actual'>0.00</span> <br><br>
  Monthly Interest: $<span id="m_interest">0.00</span> <br><br>-->

  <h1>Calculations</h1>
	Minimum Monthly Payment: $<span id='minimum'>0.00</span> <br><br>
	Total Interest Paid: $<span id='total_interest'>0.00</span> <br><br>
	Interest Saved: $<span id='interest_saved'>0.00</span> <br><br>
	Term Shortened by: <span id='years_shortened'>0</span> years, <span id='months_shortened'>0</span> months <br><br>
  
  <table width="100%" border="1" cellpadding="0" cellspacing="0">
    <thead>
      <tr>
        <th>Month</th>
        <th>Principle</th>
        <th>Interest</th>
        <th>Principle Paid</th>
        <th>Payment</th>
        <th>Total Interest Paid</th>
      </tr>
  	</thead>
    <tbody id="mortgage_table">
    </tbody>
	</table>
<!--
	<h1>Don't forget:</h1>
	<ul>
	  <li>One-time extra
    payment</li>
	  <li>Changed monthly payment </li>
	  <li>Loop through by month showing
	    <ul>
	      <li>principle	</li>
	      <li>interest	</li>
	      <li>principle paid	</li>
	      <li>payment	</li>
	      <li>total interest paid	</li>
	      <li>one-time extra payment	(calculable field)</li>
	      <li>changed monthly payment (calculable field)</li>
      </ul>
	  </li>
	  <li>Add field for original and new payoff dates</li>
	  <li>Graph of actual and changes</li>
	  <li>Date dropdown box</li>
</ul>
	<h1>Idea from:</h1>
  <a href="https://docs.google.com/spreadsheet/ccc?key=0AuRiQTd39nuqdGM0OHB1bmpCQTM4MFpFSTl0UVctYkE#gid=1">https://docs.google.com/spreadsheet/ccc?key=0AuRiQTd39nuqdGM0OHB1bmpCQTM4MFpFSTl0UVctYkE#gid=1</a><br><br>
  
-->	
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
	<script>
	$(document).load(function(e) {
				var loan			= 0;
				var interest 	= 0;
				var term			= 0;
				var date			= 0;
				var actual		= 0;
  });

		// Listeners
		$('input').keyup(calculate);
		//$('select,input[type=checkbox]').change(calculate);
	
		// Calculation function
		function calculate() {
			
				// Data
				var loan			= $('input[name=loan]').val();
				var interest 	= $('input[name=interest]').val();
				var term			= $('input[name=term]').val();
				var date			= $('input[name=date]').val();
				var actual		= $('input[name=actual]').val();

				// Tabla rasa
				var minimum						= 0;
				var interest_paid			= 0;
				var interest_saved		= 0;
				var years_shortened		= 0;
				var months_shortened	= 0;
				var mortgage_table		= '';
				
				// Calculate minimum payment
				var m_interest				= interest / 1200;
				var months						= term * 12
				var n_interest				= Math.pow((1 + m_interest),(months))
				var minimum						= (loan * (m_interest * n_interest)/ (n_interest - 1)).toFixed(2);
				
				// Interest first month
				var principle					= loan;
				var principle_paid		= 0;
				var total_interest		= 0;

				for (var i=1; i<=months; i++){
					
					var this_month			= i
					var principle				= (principle - principle_paid).toFixed(2);
					var interest_paid		= (principle * m_interest).toFixed(2);
					var payment 				= minimum;
					var principle_paid	= (payment - interest_paid).toFixed(2);
					var total_interest	= (parseFloat(interest_paid) + parseFloat(total_interest)).toFixed(2);
							mortgage_table	+= 
																'<tr>' +
																	'<td>' + this_month + '</td>' +
																	'<td>' + principle + '</td>' +
																	'<td>' + interest_paid + '</td>' +
																	'<td>' + principle_paid + '</td>' +
																	'<td>' + payment + '</td>' +
																	'<td>' + total_interest + '</td>' +
																'</tr>';
							
				};
						
				var interest_saved		= 0;
				var years_shortened		= 0;
				var months_shortened	= 0;

				$('#interest').html(interest);
				$('#term').html(term);
				$('#loan').html(loan);
				$('#m_interest').html(m_interest);
				$('#minimum').html(minimum);
				$('#total_interest').html(total_interest);
				$('#interest_saved').html(interest_saved);
				$('#years_shortened').html(years_shortened);
				$('#months_shortened').html(months_shortened);
				$('#mortgage_table').html(mortgage_table);
							
		}
	
	
	</script>

<body>